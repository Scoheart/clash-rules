mode: rule
log-level: debug
port: 7897

proxies:
  - name: USA-amazon
    type: ss
    server: 54.188.20.137
    port: 8488
    cipher: chacha20-ietf-poly1305
    password: 8888
    udp: false

rule-providers:
  apple:
    type: inline
    behavior: classical
    payload:
      - DOMAIN,22-courier.push.apple.com
      - DOMAIN,30-courier.push.apple.com
      - DOMAIN,gs-loc-cn.apple.com
      - DOMAIN,token.safebrowsing.apple

  claude:
    type: inline
    behavior: classical
    payload:
      - DOMAIN,api.anthropic.com
      - DOMAIN,claude.ai
      - DOMAIN,claude.com
      - DOMAIN,code.claude.com
      - DOMAIN,docs.claude.com
      - DOMAIN,platform.claude.com

  cursor:
    type: inline
    behavior: classical
    payload:
      - DOMAIN,api2.cursor.sh

  discord:
    type: inline
    behavior: classical
    payload:
      - DOMAIN,discord.com
      - DOMAIN,discord.gg
      - DOMAIN-SUFFIX,discord.com

  docker:
    type: inline
    behavior: classical
    payload:
      - DOMAIN,ai-backend-service.docker.com
      - DOMAIN,api.docker.com
      - DOMAIN,auth.docker.com
      - DOMAIN,auth.docker.io
      - DOMAIN,desktop.docker.com
      - DOMAIN,dockerstatic.com
      - DOMAIN,hub.docker.com
      - DOMAIN,login.docker.com
      - DOMAIN,mcp.docker.com
      - DOMAIN,production.cloudflare.docker.com
      - DOMAIN,registry-1.docker.io
      - DOMAIN,www.docker.com

  github:
    type: inline
    behavior: classical
    payload:
      - DOMAIN,github.com
      - DOMAIN,raw.githubusercontent.com

  google:
    type: inline
    behavior: classical
    payload:
      - DOMAIN,accountcapabilities-pa.googleapis.com # Google Account Capabilities
      - DOMAIN,accounts.google.com
      - DOMAIN,ai.google.dev
      - DOMAIN,aistudio.google.com
      - DOMAIN,alkalimakersuite-pa.clients6.google.com
      - DOMAIN,android.clients.google.com
      - DOMAIN,apis.google.com
      - DOMAIN,calendar.google.com
      - DOMAIN,chromemodelexecution-pa.googleapis.com
      - DOMAIN,chromewebstore.googleapis.com # Chrome Web Store
      - DOMAIN,clients1.google.com
      - DOMAIN,clients2.google.com
      - DOMAIN,clients4.google.com
      - DOMAIN,clientservices.googleapis.com
      - DOMAIN,cloudcode-pa.googleapis.com
      - DOMAIN,content-autofill.googleapis.com
      - DOMAIN,csp.withgoogle.com
      - DOMAIN,daily-cloudcode-pa.googleapis.com
      - DOMAIN,daily-cloudcode-pa.sandbox.googleapis.com # Antigravity
      - DOMAIN,firebaselogging-pa.googleapis.com
      - DOMAIN,gemini.google.com # Gemini
      - DOMAIN,generativelanguage.googleapis.com
      - DOMAIN,google.com
      - DOMAIN,history.google.com
      - DOMAIN,i.ytimg.com
      - DOMAIN,identitytoolkit.googleapis.com
      - DOMAIN,securetoken.googleapis.com # Google/Firebase 鉴权 Token 服务（登录换取/刷新 token）
      - DOMAIN,yt3.ggpht.com # YouTube 头像/频道图标 CDN（Google ggpht）
      - DOMAIN,jnn-pa.googleapis.com
      - DOMAIN,lh3.google.com
      - DOMAIN,lh3.googleusercontent.com
      - DOMAIN,mail.google.com
      - DOMAIN,memex-pa.googleapis.com
      - DOMAIN,mtalk.google.com # Antigravity
      - DOMAIN,oauth2.googleapis.com
      - DOMAIN,ogads-pa.clients6.google.com
      - DOMAIN,ogs.google.com
      - DOMAIN,optimizationguide-pa.googleapis.com
      - DOMAIN,play.google.com
      - DOMAIN,play.googleapis.com
      - DOMAIN,safebrowsing.google.com
      - DOMAIN,safebrowsing.googleapis.com # Antigravity
      - DOMAIN,safebrowsingohttpgateway.googleapis.com
      - DOMAIN,signaler-pa.clients6.google.com # Antigravity
      - DOMAIN,storage.googleapis.com # Google Cloud Storage
      - DOMAIN,translate.google.com
      - DOMAIN,update.googleapis.com
      - DOMAIN,waa-pa.clients6.google.com
      - DOMAIN,www.google.com # Google
      - DOMAIN,www.googleapis.com # Antigravity
      - DOMAIN,www.gstatic.com
      - DOMAIN,www.youtube.com # YouTube
      - DOMAIN-SUFFIX,googleusercontent.com
      - DOMAIN-SUFFIX,googlevideo.com
      - DOMAIN-SUFFIX,gstatic.com
      - DOMAIN-SUFFIX,youtube.com

  misc:
    type: inline
    behavior: classical
    payload:
      - DOMAIN,alb.reddit.com
      - DOMAIN,anyrouter.top
      - DOMAIN,app.warp.dev
      - DOMAIN,astral.sh
      - DOMAIN,axios-http.com
      - DOMAIN,babeljs.io
      - DOMAIN,cdn-avatars.huggingface.co
      - DOMAIN,cloud.dify.ai
      - DOMAIN,developer.mozilla.org
      - DOMAIN,en.wikipedia.org # Wikipedia
      - DOMAIN,huggingface.co
      - DOMAIN,kazupon.github.io # Vue I18n
      - DOMAIN,lmarena.ai
      - DOMAIN,m.stripe.com
      - DOMAIN,mcp.context7.com
      - DOMAIN,nexus-websocket-a.intercom.io
      - DOMAIN,netdna.bootstrapcdn.com
      - DOMAIN,ollama.com
      - DOMAIN,o33249.ingest.us.sentry.io
      - DOMAIN,o540343.ingest.sentry.io # Sentry Ingest
      - DOMAIN,pixel-config.reddit.com
      - DOMAIN,registry.npmjs.org
      - DOMAIN,shadowsocks.org
      - DOMAIN,www.gravatar.com
      - DOMAIN,www.typescriptlang.org
      - DOMAIN-SUFFIX,intellimizeio.com
      - DOMAIN,arai-a.github.io

  openai:
    type: inline
    behavior: classical
    payload:
      - DOMAIN,ab.chatgpt.com
      - DOMAIN,auth.openai.com
      - DOMAIN,api.openai.com
      - DOMAIN,chatgpt.com
      - DOMAIN,ios.chat.openai.com
      - DOMAIN,platform.openai.com
      - DOMAIN,realtime.chatgpt.com
      - DOMAIN,ws.chatgpt.com

  telegram:
    type: inline
    behavior: classical
    payload:
      - DOMAIN,api.telegram.org
      - DOMAIN,flora.web.telegram.org
      - DOMAIN,kws2.web.telegram.org
      - DOMAIN,kws5.web.telegram.org
      - DOMAIN,macos.telegram.org
      - DOMAIN,t.me
      - DOMAIN,telegram.bot
      - DOMAIN,telegram.dog
      - DOMAIN,telegram.me
      - DOMAIN,telegram.org
      - DOMAIN,venus.web.telegram
      - DOMAIN,venus.web.telegram.org
      - DOMAIN,web.telegram.org
      - DOMAIN,web.telegram.org
      - DOMAIN-SUFFIX,telegram.org

  x:
    type: inline
    behavior: classical
    payload:
      - DOMAIN,api.twitter.com
      - DOMAIN,api.x.com
      - DOMAIN,grok.com
      - DOMAIN,ton.local.twitter.com
      - DOMAIN,x.com
      - DOMAIN,x.ai

rules:
  - RULE-SET,apple,USA-amazon
  - RULE-SET,claude,USA-amazon
  - RULE-SET,cursor,USA-amazon
  - RULE-SET,discord,USA-amazon
  - RULE-SET,docker,USA-amazon
  - RULE-SET,github,USA-amazon
  - RULE-SET,google,USA-amazon
  - RULE-SET,misc,USA-amazon
  - RULE-SET,openai,USA-amazon
  - RULE-SET,telegram,USA-amazon
  - RULE-SET,x,USA-amazon
  - MATCH,DIRECT
